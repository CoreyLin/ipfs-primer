# 内容寻址的力量

## 目标

这节课介绍了 _内容寻址_ 的概念，并探讨了使用这种方法的强大含义。

学习完这节课，你就能

* 定义 _内容寻址_ ，并将其与 _位置寻址_ 进行比较
* 解释能够通过这么多不同路径访问IPFS内容的含义

## 解释

### 问题:根据位置识别内容

当你使用`http://`或`https://`链接指向一个网页、图像、电子表格、数据集、tweet等时，你是根据其位置识别内容。这个链接是指向web上某个特定位置的一个标识符，该位置对应于web上某个地方的某个特定服务器或一组服务器。**谁控制了这个位置，谁就控制了内容。**这就是HTTP的工作原理。它是位置寻址的。即使有一千个人下载了一个文件的副本，这意味着内容存在于一千个位置，HTTP也指向一个位置。这种位置寻址的方法迫使我们都假装数据只在一个位置上。谁控制了这个位置，谁就决定了当人们使用这个链接时返回什么内容。他们还决定是否返回任何内容。

要了解通过位置来定位内容是多么不切实际，想象一下如果我使用位置寻址来推荐[为什么信息会增长](http://www.goodreads.com/book/show/20763722-why-information-grows)这本书。

如果我根据内容来识别这本书，说“Check out the book called Why Information Grows by César Hidalgo. The ISBN is 0465048994.”，你可以从任何渠道获得这本书的任何副本，并且知道你正在阅读我推荐的信息。你甚至可能会说“哦，我已经看过了。”或者“我的室友在另一个房间有这本书。我要向他借这本书。”这样你就不必再花钱或费力气去找另一本副本了。

相比之下,如果我用位置寻址来识别这本书,我就会指向一个位置,说一些像“Go to the news stand at Market & 15th in Philadelphia and ask for the thing 16 inches from the south end of the third shelf on the east wall”的话，这些指令是令人困惑和尴尬的,但这就是http链接工作的方式。它们根据位置来识别内容，并依赖于该位置的“主机”为访问者提供内容。这种方法可能会出现很多问题。它还赋予了控制你所指向位置的人很大的权力和责任——在这里是指报刊亭。

让我们考虑一下控制我们所指向的位置的人的责任。如果经营报摊的人想要我的指示(我的“link”)保持有效，允许人们访问这本书，他们必须:

* 7*24小时保持开放，以防有人想读这本书。
* 把这本书提供给每一个想要这本书的人，无论是一个人还是成千上万的人。
* 保护这本书的完整性，防止任何人篡改它。
* 永远不要把书从书架上拿下来 - 如果他们扔掉它，甚至移动它，我的链接就坏了，没有人能按照我的指示找到这本书。

伴随这些责任而来的是巨大的权力。报刊亭的业主可以控制我的指示指向的位置，所以他们可以选择:

* 决定允许谁看这本书。
* 不要告诉任何人就把书移动。
* 破坏这本书。
* 向读者收费，或者强迫他们在进门时观看广告。
* 收集每个访问我的书的人的数据，使用他们想要的任何信息。
* 把这本书换成别的东西——他们甚至可能不会把一本书放在那里，因为我的指示只是描述一个位置，一个恶意的参与者可能会把书换成一些危险的东西，从而把这个位置变成一个陷阱!

位置寻址已经在网络上工作了25年，但它开始变得痛苦，而且它将变得更糟。只要我们继续依赖它，网络就会继续不稳定、不安全，并容易被操纵或利用。

### 解决方案:通过指纹识别信息，而不是位置

另一种方法是通过“指纹”来识别内容，而不是通过位置来识别内容。这样，当有人说“用这个指纹查看内容”时，你就可以从任何拥有该内容的一个副本的人那里获得它。为此，我们通过它的加密哈希标识内容。一个加密哈希是一个由字母和数字组成的短字符串，通过将内容输入到[SHA](https://en.wikipedia.org/wiki/SHA-3)这样的一个 _加密哈希函数_ 中来计算。

当我们以这种方式标识/识别内容时，使用内容的加密哈希而不是其位置来标识/识别内容，这称为 _内容寻址_ 。一块内容的加密哈希永远不会改变，这意味着**内容寻址保证链接将始终返回相同的内容**，无论我从哪里检索内容，无论是谁将内容添加到网络，也无论内容是何时添加的。这就是使用一个 _内容寻址_ 协议(如IPFS)而不是使用一个 _位置寻址_ 协议(如HTTP)的基本功能。

### 内容寻址的含义

**以内容寻址的链接是永恒不变的。**链接永久地指向该内容。这有许多强大的含义。从计算机科学的角度来看，每当我们创建使用内容寻址的链接的数据时，我们都在创建一个[持久化的数据结构](https://en.wikipedia.org/wiki/Persistent_data_structure)。关于持久化数据结构的应用程序有大量的文献。在本课中，我们将指出使用一个内容寻址协议存储和共享数据的一些含义:

#### 它让我们一起存储数据。

这种去中心化的、内容寻址的方法从根本上增加了数据的持久性。它确保只要任何人仍然依赖数据，数据就不会受到威胁，因为任何人都可以持有自己关心的数据的一个有效副本。如果你在你的任何设备上持有一个数据集的副本，或者如果你花钱让某人为你在一个IPFS节点上托管它，那么你就成为保护数据集不丢失的管理员网络的一部分。你不必担心是否有人会关闭托管你数据的服务器，因为你是其中一个主机。你和你的peers之间持有数据，并能够直接共享数据，而不依赖于中心化故障点。

#### 它增加数据的完整性。

去中心化还增加了数据的完整性，因为链接是内容寻址的。这意味着我们可以通过根据链接检查数据的指纹来验证数据。对于位置寻址的链接，这种验证是不可能的。这在大规模的情况（数百万的网站和数据集相互引用数十亿次）下尤其强大。对于位置寻址的链接，所有这些连接都很脆弱。通过内容寻址的链接，连接变得有弹性和可靠。

#### 链接可以恢复生机。

**只要任何节点有了内容，每个节点的链接就开始工作。**即使有人破坏了网络上的所有副本，也只需要一个节点添加内容就可以恢复可用性。一个加密哈希永久地指向它所派生的内容，因此IPFS链接永久地指向它们的内容。即使内容在一段时间内不可用，只要有人再次开始提供内容，链接就会工作。

#### 更难攻击，更容易恢复。

**即使原始发布者被移除，任何拥有这些内容的人都可以提供这些内容。**只要网络上至少有一个节点拥有该内容的一个副本，每个人都可以获得它。这意味着，提供内容的责任可以随着时间的推移而改变，但不会改变人们链接到内容的方式，而且毫无疑问，你正在阅读的内容正是最初发布的内容。

**你下载的内容经过密码学验证**，以确保它没有被篡改。

**IPFS可以在分区网络中工作** - 通过IPFS访问内容不需要与web的剩余部分有稳定的连接。只要你的节点可以连接到至少一个拥有你所需内容的节点，它就可以工作!

**如果一个IPFS网关被阻塞，你可以使用另一个网关**。IPFS网关都能够提供相同的内容，因此你不必依赖于一个故障点。

**减轻负载**:有了IPFS，浏览内容的人也在帮助分发内容(除非他们选择退出)，而且任何人都可以选择在自己的节点上pin一些内容的副本，以帮助访问和保存。

**你可以匿名阅读。**与HTTP一样，IPFS可以在Tor和其他匿名系统上工作

**IPFS不依赖DNS。**如果有人阻止你访问DNS或欺骗你的网络中的DNS，它不会阻止IPFS节点通过点对点网络解析内容。即使你使用的是IPFS的DNSlink特性，你也只需要找到一个能够访问DNS的网关。只要你所依赖的网关能够访问DNS，它就能够解析你的DNSlink地址。

**IPFS不依赖于证书颁发机构（CA）系统**，所以坏的或腐败的证书颁发机构不会影响它。

**你可以通过[sneakernet](https://en.wikipedia.org/wiki/Sneakernet)移动内容**!这对于由于资源限制、安全原因或审查而导致连接不良的地区非常有用。即使你的网络在物理上与internet的其余部分断开了连接，你也可以将IPFS中的内容写入USB驱动器或其他外部驱动器，将它们物理地移动到连接到新网络的计算机上，并在新网络上重新发布内容。即使你在一个隔离的网络上，只要这个网络上至少有一个节点拥有该内容，IPFS将允许节点使用两个网络中的相同标识符访问该内容。

**IPFS节点努力在网络上找到彼此**，并在连接被切断后重新连接。

(试验性的)**你甚至可以形成私有IPFS网络**，只与你选择连接的计算机共享信息。

## 进一步阅读

进一步阅读:

* [HTTP过时了。是时候使用分布式的、永久的web了](https://ipfs.io/ipfs/QmNhFJjGcMPqpuYfxL62VVB9528NXqDNMFXiqN5bgFYiZ1/its-time-for-the-permanent-web.html)
* [保存濒危数据的说明](https://github.com/ipfs/community/blob/master/articles/endangered-data.md)

观看视频:

* [这是Juan Benet的演讲](https://youtu.be/2RCwZDRwk48?t=847)

学术论文:

* [IPFS白皮书](https://github.com/ipfs/papers/raw/master/ipfs-cap2pfs/ipfs-p2p-file-system.pdf)

## 接下来的步骤

阅读[有关访问和分发IPFS内容的多种方法的教程](./)，了解使用IPFS使用相同内容寻址链接访问相同内容的多种不同方法。
