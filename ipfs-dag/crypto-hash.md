# 课程:密码哈希

## 目标

* 了解密码哈希，它们的历史和特征

## 密码哈希的特征

密码哈希被视为字母和数字数据的长字符串。它们是通过将数据作为输入显示给一个 _密码哈希函数_ 来创建的，该函数处理数据并写出一个哈希值或校验和(checksum)。输入数据的长度可以是任意的，但输出哈希的长度总是固定的。

密码哈希有一些非常重要的特征:

* **确定性的** - 相同的输入消息总是返回完全相同的输出哈希
* **不相关的** - 消息中的一个小变化应该会生成一个完全不同的哈希
* **唯一性** - 不可能从两个不同的消息生成相同的哈希
* **单向的** - 不可能从其哈希猜测或计算输入消息

让我们来看看这些特征:

**确定性的:** 只要使用相同的密码哈希函数，就总是会对相同的输入数据得到完全相同的输出哈希值。例如，这允许你验证一个文件中可能有的数据的真实性。如果两个文件在使用相同的密码哈希函数处理时具有相同的输出哈希，那么可以认为数据是相同的。

**不相关的:** 对输入数据的一个小更改应该生成一个完全不同的哈希。这样，这两个哈希值看起来就不相关了。你可以在命令行上演示这一点

```bash
$ echo "Abracadabra!" | ipfs add
added QmWyVG3yhEu8o6EMbUTxcFdzSkddN2NobJye1LhuNajaxy
$ echo "abracadabra!" | ipfs add
added QmdFyNVLCtWxyJDr9osNWMoY6CrnDQQRT8Ypa6MBpkjap3
```

请注意上面两个哈希的巨大差异。通过将第一个字符'A'更改为小写'a'，哈希函数生成了非常不同的输出。

**唯一性:** 不可能从两个不同的消息生成相同的哈希。这是一个构建良好、健壮的密码哈希函数的特征。有些哈希函数可能对不同的消息派生出相同的哈希，这称为 _哈希碰撞_ 。哈希函数随着时间的推移而不断进化，这主要是由于发现了漏洞和弱点。现代密码哈希函数以 _抗碰撞能力强_ 而闻名。由于哈希函数被认为是现代密码学的关键构件，因此在攻击密码哈希函数方面已经做了大量工作。

**单向的:** 不可能从其哈希猜测或计算输入消息。换句话说，你不能反向或反转哈希函数来获得计算它的原始消息。因此，一个密码哈希函数被认为是一个单向函数。有时使用蛮力攻击方法来尝试查找与给定哈希匹配的消息。使用彩虹表(从已知输入的预计算值)是另一种常见攻击。

## 密码哈希的历史

**MD5:** 由Ron Rivest在1991年设计，用来取代早期的哈希函数MD4。“MD”代表“消息摘要Message Digest”。产生128位(16字节)的哈希。适合于非加密用途，例如基本数据完整性。对MD5的冲突可以在数秒内计算出来，这使得该算法不适合用作一个密码哈希。

**SHA-1:** 作为美国政府Capstone项目的一部分。该算法的原始规范发表于1993年。“SHA”代表“安全哈希算法Secure Hash Algorithm”。产生160位(20字节)的哈希。已经产生了与SHA-1的碰撞，这个哈希函数应该被认为被破坏了。

**SHA-2:** 由美国国家安全局(NSA)设计，首次发布于2001年。SHA-2基本上由两种哈希算法组成:SHA-256和SHA-512。SHA-512比SHA-256更安全。这两种算法都有许多变体。SHA-256产生256位(32字节)的哈希，而SHA-512产生512位(64字节)的哈希。

**SHA-3:** 由NIST于2015年发布。SHA-3是更广泛的密码原语家族Keccak的子集。SHA-3具有与SHA-2相同的输出大小:224、256、384和512位。

[阅读有关加密哈希函数的更多信息](https://en.wikipedia.org/wiki/Cryptographic_hash_function)

## 接下来的步骤

接下来，学习如何 [在IPFS中使用密码哈希来连接数据块构建一颗数据树(Merkle DAG)](blocks-from-scratch.md)

